name: Tech Solutions Bot ğŸ› ï¸

on:
  schedule:
    - cron: '30 */8 * * *'  # ÙŠØ¹Ù…Ù„ ÙƒÙ„ 8 Ø³Ø§Ø¹Ø§Øª (Ù…Ø«Ù„Ø§Ù‹ 8:30ØŒ 16:30...)
  workflow_dispatch:      # Ø²Ø± Ù„Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ

permissions:
  contents: write

jobs:
  run-tech-bot:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        # ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ù„Ø£Ù†Ù‡ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ requests
        run: pip install -r requirements.txt

      - name: Run Tech Solutions Script
        env:
          BLOG_ID: ${{ secrets.BLOG_ID }}
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          CLIENT_ID: ${{ secrets.CLIENT_ID }}
          CLIENT_SECRET: ${{ secrets.CLIENT_SECRET }}
          REFRESH_TOKEN: ${{ secrets.REFRESH_TOKEN }}
        run: python tech_solutions_bot.py

      - name: Commit and Push History
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          # Ù‡Ù†Ø§ Ù†Ø­ÙØ¸ ÙÙ‚Ø· Ù…Ù„Ù Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙˆØª
          git add history_tech_solutions.json
          git commit -m "ğŸ§  Tech Bot updated memory [skip ci]" || echo "No changes to commit"
          git push
