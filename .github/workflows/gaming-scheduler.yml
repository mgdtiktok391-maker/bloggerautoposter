name: Gaming Bot ğŸ®

on:
  schedule:
    # ÙŠØ¹Ù…Ù„ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø§Ù„Ø³Ø§Ø¹Ø© 14:00 UTC (ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ 5 Ù…Ø³Ø§Ø¡Ù‹ Ø¨ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø¹Ø±Ø§Ù‚)
    - cron: '0 14 * * *'
  workflow_dispatch: # Ø²Ø± Ù„Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ

permissions:
  contents: write

jobs:
  run-gaming-bot:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        # Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…Ø«Ø¨ØªØ© Ù…Ø³Ø¨Ù‚Ø§Ù‹ ÙÙŠ Ù…Ù„ÙÙƒ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø­Ø¯ÙˆØ« Ù…Ø´Ø§ÙƒÙ„
        run: pip install -r requirements.txt

      - name: Run Gaming Bot
        env:
          BLOG_URL: ${{ secrets.BLOG_URL }}
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          CLIENT_ID: ${{ secrets.CLIENT_ID }}
          CLIENT_SECRET: ${{ secrets.CLIENT_SECRET }}
          REFRESH_TOKEN: ${{ secrets.REFRESH_TOKEN }}
        run: python gaming_bot.py

      - name: Commit History
        # Ø­ÙØ¸ Ø³Ø¬Ù„ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø­ØªÙ‰ Ù„Ø§ ÙŠÙƒØ±Ø± Ø§Ù„Ø¨ÙˆØª Ù†ÙØ³ Ø§Ù„Ù„Ø¹Ø¨Ø© ØºØ¯Ø§Ù‹
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add history_gaming.json
          git commit -m "ğŸ® Gaming Bot history update [skip ci]" || echo "No changes"
          git push
