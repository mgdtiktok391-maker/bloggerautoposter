name: Gaming Bot ğŸ®

on:
  schedule:
    # Ø§Ù„ØªÙˆÙ‚ÙŠØª: Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© 23ØŒ Ø§Ù„Ø³Ø§Ø¹Ø© 11 UTC (Ø£ÙŠ 2:23 Ø¸Ù‡Ø±Ø§Ù‹ Ø¨ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø¹Ø±Ø§Ù‚)
    - cron: '23 11 * * *'
  workflow_dispatch: # Ø²Ø± Ù„Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª

permissions:
  contents: write

jobs:
  run-gaming-bot:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        # Ù†Ø³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙˆØ§ÙÙ‚
        run: pip install -r requirements.txt

      - name: Run Gaming Bot
        env:
          BLOG_URL: ${{ secrets.BLOG_URL }}
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
          CLIENT_ID: ${{ secrets.CLIENT_ID }}
          CLIENT_SECRET: ${{ secrets.CLIENT_SECRET }}
          REFRESH_TOKEN: ${{ secrets.REFRESH_TOKEN }}
        run: python gaming_bot.py

      - name: Commit History
        # Ø­ÙØ¸ Ø§Ù„Ø³Ø¬Ù„ Ù„Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add history_gaming.json
          git commit -m "ğŸ® Gaming Bot history update [skip ci]" || echo "No changes"
          git push
